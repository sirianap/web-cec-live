(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{352:function(t,e,n){var content=n(428);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("a4e8493e",content,!0,{sourceMap:!1})},427:function(t,e,n){"use strict";var r=n(352);n.n(r).a},428:function(t,e,n){var r=n(12),o=n(326),l=n(429);e=r(!1);var c=o(l);e.push([t.i,".bg-siswa[data-v-3d0523a6]{background:linear-gradient(hsla(0,0%,100%,.9),hsla(0,0%,100%,.8)),url("+c+") no-repeat;background-position:100%;background-attachment:fixed;background-size:contain;min-height:85vh}.add-btn[data-v-3d0523a6]{position:fixed;bottom:0;right:0}",""]),t.exports=e},429:function(t,e,n){t.exports=n.p+"img/4d2af83.svg"},461:function(t,e,n){"use strict";n.r(e);n(200),n(88),n(37);var r=n(11),o={data:function(){return{transaksi:{siswa:{nama:""},created_by:{name:""}},table_siswa_header:[{text:"Nama siswa",value:"nama"},{text:"NIS",value:"nis"},{text:"Saldo DigitCard",value:"saldo_digitcard"},{text:"Saldo Bulanan",value:"saldo_total"},{text:"",value:"id"}],daftar_siswa:[],dialog_tambah_siswa:!1,dialog_topup:!1,dialog_edit:!1,dialog_transaksi:!1,search:"",drawer:!1,input:{siswa:{nama:null,nis:null},topup:{siswa_id:null,nominal:null,mutasi_type:"in",saldo_type:"card"}},detail:{nama:null,nis:null,saldo_digitcard:null,saldo_total:null,id:null},sukses:{siswa:!1},error:{status:!1,msg:""},edit_siswa:{id:null,nama:"",nis:""}}},methods:{getSiswa:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("siswa");case 3:n=e.sent,t.daftar_siswa=n,e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.error.status=!0,t.error.msg=e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))()},tambahSiswa:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios({method:"post",url:"siswa",data:t.input.siswa});case 3:e.sent,t.sukses.siswa=!0,t.dialog_tambah_siswa=!1,t.getSiswa(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.error.status=!0,t.error.msg=e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()},lihatDetail:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$get("siswa/"+t.nis);case 3:r=n.sent,e.detail=r,e.input.topup.siswa_id=r.id,n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),e.error.status=!0,e.error.msg=n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,8]])})))()},topUpSiswa:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios({method:"post",url:"/transaksi",data:t.input.topup});case 3:n=e.sent,t.dialog_topup=!1,console.log(n),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.error.status=!0,t.error.msg=e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},editSiswa:function(){this.dialog_edit=!0,Object.assign(this.edit_siswa,this.detail)},updateSiswa:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios({method:"put",url:"siswa/"+t.edit_siswa.id,data:t.edit_siswa});case 3:n=e.sent,console.log(n),t.sukses.status=!0,t.sukses.msg="Perubahan berhasil disimpan",t.dialog_edit=!1,t.getSiswa(),t.$refs.form_edit_siswa.reset(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),t.error.status=!0,t.error.msg="Hmmm ada yang salah deh";case 17:case"end":return e.stop()}}),e,null,[[0,12]])})))()},detailTransaksi:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.get("/transaksi/"+t);case 3:r=n.sent,e.transaksi=r.data,e.dialog_transaksi=!0,console.log(r),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()}},computed:{filteredSiswa:function(){var t=this;return this.daftar_siswa.filter((function(e){return e.nama.toLowerCase().match(t.search.toLowerCase())||e.nis.toLowerCase().match(t.search.toLowerCase())}))}},mounted:function(){this.getSiswa()}},l=(n(427),n(43)),c=n(58),v=n.n(c),d=n(132),m=n(148),_=n(127),f=n(69),w=n(357),h=n(446),k=n(338),x=n(361),y=n(345),C=n(126),S=n(362),$=n(129),V=n(81),R=n(130),T=n(131),P=n(35),D=n(323),L=n(363),j=n(339),I=n(324),N=n(447),O=n(452),M=n(443),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-siswa"},[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{md12:"",xs12:"",lg12:"",sm12:""}},[r("v-text-field",{attrs:{solo:"",label:"Cari siswa","hide-details":"","prepend-inner-icon":"mdi-account-search",color:"green"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),r("v-flex",[r("v-list",{staticClass:"transparent"},[0==t.daftar_siswa.length?[r("v-row",{attrs:{justify:"center"}},[r("v-avatar",{attrs:{size:"100px"}},[r("v-icon",{staticClass:"mdi-spin",attrs:{size:"50px",color:"primary"}},[t._v("mdi-loading")])],1)],1)]:t._l(t.filteredSiswa,(function(e){return[r("div",{key:e.id},[r("v-list-item",{on:{click:function(n){n.stopPropagation(),t.lihatDetail(e),t.drawer=!0}}},[r("v-list-item-avatar",[r("img",{attrs:{src:n(143),width:"100%"}})]),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.nama))]),t._v(" "),r("v-list-item-subtitle",[t._v(t._s(e.nis))])],1),t._v(" "),r("v-list-item-action",[r("v-btn",{attrs:{icon:"",color:"primary"}},[r("v-icon",[t._v("mdi-eye")])],1)],1)],1),t._v(" "),r("v-divider")],1)]}))],2)],1)],1),t._v(" "),"pembina"==t.$auth.user.role||"sysadmin"==t.$auth.user.role?r("div",{staticClass:"add-btn"},[r("v-btn",{staticClass:"ma-4",attrs:{fab:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.dialog_tambah_siswa=!0}}},[r("v-icon",[t._v("mdi-plus")])],1)],1):t._e(),t._v(" "),r("v-dialog",{attrs:{persistent:"",width:"600px"},model:{value:t.dialog_edit,callback:function(e){t.dialog_edit=e},expression:"dialog_edit"}},[r("v-card",[r("v-card-title",[t._v("\n        Edit siswa\n        "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.dialog_edit=!1}}},[r("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),r("v-card-text",[r("v-form",{ref:"form_edit_siswa"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{"hide-details":"",label:"Nama siswa"},model:{value:t.edit_siswa.nama,callback:function(e){t.$set(t.edit_siswa,"nama",e)},expression:"edit_siswa.nama"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{"hide-details":"",label:"Nomor Induk Siswa",type:"number"},model:{value:t.edit_siswa.nis,callback:function(e){t.$set(t.edit_siswa,"nis",e)},expression:"edit_siswa.nis"}})],1)],1)],1)],1),t._v(" "),r("v-card-actions",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.updateSiswa(e)}}},[t._v("Simpan")])],1)],1)],1),t._v(" "),r("v-dialog",{attrs:{persistent:"",width:"600px"},model:{value:t.dialog_topup,callback:function(e){t.dialog_topup=e},expression:"dialog_topup"}},[r("v-card",[r("v-card-title",[t._v("\n        Top Up\n        "),r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"pa-0 ma-0",attrs:{fab:"",icon:"",small:""},on:{click:function(e){e.stopPropagation(),t.dialog_topup=!1}}},[r("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1)],1),t._v(" "),r("v-card-text",[r("v-row",[r("v-col",[r("v-list-item",[r("v-list-item-content",{staticClass:"text-center"},[r("v-list-item-title",[t._v(t._s(t.detail.nama))]),t._v(" "),r("v-list-item-subtitle",[t._v(t._s(t.detail.nis))])],1)],1),t._v(" "),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[t._v("Saldo DigitCard")]),t._v(" "),r("v-list-item-title",[t._v("Simpanan")])],1),t._v(" "),r("v-list-item-content",{staticClass:"text-right"},[r("v-list-item-title",[t._v("Rp. "+t._s(t.detail.saldo_digitcard))]),t._v(" "),r("v-list-item-title",[t._v("Rp. "+t._s(t.detail.saldo_total))])],1)],1)],1),t._v(" "),r("v-col",{staticClass:"text-center",attrs:{cols:"12",md:"6",order:"first","order-md":"last"}},[r("img",{attrs:{src:n(143),width:"40%"}})])],1),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.input.topup.saldo_type,callback:function(e){t.$set(t.input.topup,"saldo_type",e)},expression:"input.topup.saldo_type"}},[r("v-tab",{attrs:{href:"#card"}},[t._v("DigitCard")]),t._v(" "),r("v-tab",{attrs:{href:"#total"}},[t._v("Simpanan")])],1)],1),t._v(" "),r("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Nominal",type:"number"},model:{value:t.input.topup.nominal,callback:function(e){t.$set(t.input.topup,"nominal",e)},expression:"input.topup.nominal"}})],1)],1)],1),t._v(" "),"pembina"==t.$auth.user.role?r("v-card-actions",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.topUpSiswa(e)}}},[t._v("Top Up")])],1):t._e()],1)],1),t._v(" "),r("v-dialog",{attrs:{persistent:"",width:"600px"},model:{value:t.dialog_tambah_siswa,callback:function(e){t.dialog_tambah_siswa=e},expression:"dialog_tambah_siswa"}},[r("v-card",[r("v-card-title",[t._v("\n        Tambah siswa\n        "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.dialog_tambah_siswa=!1,t.$refs.form_tambah_siswa.reset()}}},[r("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),r("v-card-text",[r("v-form",{ref:"form_tambah_siswa"},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Nama"},model:{value:t.input.siswa.nama,callback:function(e){t.$set(t.input.siswa,"nama",e)},expression:"input.siswa.nama"}})],1),t._v(" "),r("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Nomor Induk Siswa",type:"number",counter:""},model:{value:t.input.siswa.nis,callback:function(e){t.$set(t.input.siswa,"nis",e)},expression:"input.siswa.nis"}})],1)],1)],1)],1),t._v(" "),r("v-card-actions",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.tambahSiswa(e)}}},[t._v("Simpan")])],1)],1)],1),t._v(" "),r("v-snackbar",{attrs:{color:"primary"},model:{value:t.sukses.siswa,callback:function(e){t.$set(t.sukses,"siswa",e)},expression:"sukses.siswa"}},[t._v("\n    Siswa telah ditambahkan\n    "),r("v-btn",{attrs:{dark:"",icon:"",small:"",fab:""},on:{click:function(e){t.sukses.siswa=!1}}},[r("v-icon",[t._v("mdi-close-thick")])],1)],1),t._v(" "),r("v-snackbar",{attrs:{color:"red","multi-line":""},model:{value:t.error.status,callback:function(e){t.$set(t.error,"status",e)},expression:"error.status"}},[t._v("\n    "+t._s(t.error.msg)+"\n    "),r("v-btn",{attrs:{dark:"",icon:"",small:"",fab:""},on:{click:function(e){t.error.status=!1}}},[r("v-icon",[t._v("mdi-close-thick")])],1)],1),t._v(" "),r("v-dialog",{attrs:{width:"400px",scrollable:"",persistent:""},model:{value:t.dialog_transaksi,callback:function(e){t.dialog_transaksi=e},expression:"dialog_transaksi"}},[r("v-card",{staticClass:"bg-card",attrs:{id:"print"}},[r("v-card-title",[t._v("\n        Transaksi\n        "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.dialog_transaksi=!1}}},[r("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),r("v-card-text",[r("div",[t._v("\n          "+t._s(t.$moment(this.transaksi.created_at).format("hh:mm a, Do MMMM Y"))+"\n        ")]),t._v(" "),r("div",[r("span",{staticClass:"primary--text"},[t._v("Nomor transaksi")]),t._v(" "),r("span",{staticClass:"font-weight-medium float-right"},[t._v("\n            "+t._s(this.transaksi.id)+"\n          ")])]),t._v(" "),r("div",[r("span",{staticClass:"primary--text"},[t._v("Pembeli")]),t._v(" "),r("span",{staticClass:"font-weight-medium float-right"},[t._v("\n            "+t._s(this.transaksi.siswa.nama)+"\n          ")])]),t._v(" "),r("div",[r("span",{staticClass:"primary--text"},[t._v("Kasir")]),t._v(" "),r("span",{staticClass:"font-weight-medium float-right"},[t._v("\n            "+t._s(this.transaksi.created_by.name)+"\n          ")])]),t._v(" "),r("div",[r("span",{staticClass:"primary--text"},[t._v("Nominal")]),t._v(" "),r("span",{staticClass:"font-weight-medium float-right"},[t._v("Rp "+t._s(this.transaksi.nominal))])]),t._v(" "),r("v-list",{staticClass:"transparent",attrs:{dense:""}},[t._l(t.transaksi.detail,(function(e){return[r("v-list-item",{key:e.id,staticClass:"px-0"},[r("v-list-item-avatar",[r("div",{staticClass:"headline primary--text"},[t._v(t._s(e.jumlah))])]),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.produk.nama))]),t._v(" "),r("v-list-item-subtitle",[t._v("\n                  "+t._s(e.produk.nomor)+"\n                ")])],1),t._v(" "),r("v-list-item-content",{staticClass:"text-right"},[r("v-list-item-title",[t._v("Rp "+t._s(e.harga_total))])],1)],1)]}))],2)],1)],1)],1),t._v(" "),r("v-navigation-drawer",{attrs:{right:"",app:"",clipped:"",bottom:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("v-list-item",{attrs:{"two-line":""}},[r("v-list-item-avatar",[r("img",{attrs:{src:n(143)}})]),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(t.detail.nama))]),t._v(" "),r("v-list-item-subtitle",[t._v(t._s(t.detail.nis))])],1),t._v(" "),r("v-list-item-action",["pembina"==t.$auth.user.role||"sysadmin"==t.$auth.user.role?r("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.editSiswa()}}},[r("v-icon",[t._v("mdi-account-edit")])],1):t._e()],1)],1),t._v(" "),r("v-divider")]},proxy:!0},{key:"append",fn:function(){return[r("v-divider"),t._v(" "),r("v-list-item",{attrs:{"one-line":""}},[r("v-list-item-content",[r("v-btn",{attrs:{color:"red",text:"",small:""},on:{click:function(e){t.drawer=!t.drawer}}},[t._v("Tutup")])],1)],1)]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[t._v(" "),t._v(" "),r("v-list",{staticClass:"py-0",attrs:{nav:""}},[r("v-list-item",{attrs:{dense:""}},[r("v-list-item-content",[r("v-list-item-title",[t._v("Simpanan")]),t._v(" "),r("v-list-item-subtitle",[t._v("Rp. "+t._s(t.detail.saldo_total))])],1),t._v(" "),r("v-list-item-action",["pembina"==t.$auth.user.role||"sysadmin"==t.$auth.user.role?r("v-btn",{attrs:{color:"primary",text:"",small:""},on:{click:function(e){e.stopPropagation(),t.dialog_topup=!0,t.input.topup.saldo_type="total"}}},[t._v("Top up")]):t._e()],1)],1),t._v(" "),r("v-list-item",{attrs:{dense:""}},[r("v-list-item-content",[r("v-list-item-title",[t._v("Saldo DigitCard")]),t._v(" "),r("v-list-item-subtitle",[t._v("Rp. "+t._s(t.detail.saldo_digitcard))])],1),t._v(" "),r("v-list-item-action",["pembina"==t.$auth.user.role||"sysadmin"==t.$auth.user.role?r("v-btn",{attrs:{color:"primary",text:"",small:""},on:{click:function(e){e.stopPropagation(),t.dialog_topup=!0,t.input.topup.saldo_type="card"}}},[t._v("Top up")]):t._e()],1)],1),t._v(" "),r("v-divider"),t._v(" "),t._l(t.detail.transaksi,(function(e){return[r("v-list-item",{key:e.id,staticClass:"py-0",attrs:{"two-line":"",dense:""},on:{click:function(n){return n.stopPropagation(),t.detailTransaksi(e.id)}}},[r("v-list-item-action",{staticClass:"mr-4"},["in"==e.mutasi_type?r("v-icon",{attrs:{color:"green"}},[t._v("mdi-arrow-left")]):r("v-icon",{attrs:{color:"red"}},[t._v("mdi-arrow-right")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v("Rp "+t._s(e.nominal))]),t._v(" "),r("v-list-item-subtitle",[t._v("\n              "+t._s(t.$moment(e.created_at).format("MM-DD-YYYY LT"))+"\n            ")]),t._v(" "),r("v-list-item-subtitle",["card"==e.saldo_type?r("span",[t._v("DigitCard")]):r("span",[t._v("Simpanan")])])],1)],1)]}))],2)],1)],1)}),[],!1,null,"3d0523a6",null);e.default=component.exports;v()(component,{VAvatar:d.a,VBtn:m.a,VCard:_.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VCol:w.a,VDialog:h.a,VDivider:k.a,VFlex:x.a,VForm:y.a,VIcon:C.a,VLayout:S.a,VList:$.a,VListItem:V.a,VListItemAction:R.a,VListItemAvatar:T.a,VListItemContent:P.a,VListItemSubtitle:P.b,VListItemTitle:P.c,VNavigationDrawer:D.a,VRow:L.a,VSnackbar:j.a,VSpacer:I.a,VTab:N.a,VTabs:O.a,VTextField:M.a})}}]);